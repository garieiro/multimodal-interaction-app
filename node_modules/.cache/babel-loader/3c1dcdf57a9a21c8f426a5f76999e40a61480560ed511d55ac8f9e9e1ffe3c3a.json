{"ast":null,"code":"var _jsxFileName = \"/Users/goncaloarieiro/thesis/multimodal-interaction/src/components/charts/PieChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MultiLevelDonutChart = ({\n  data,\n  width = 500,\n  height = 500\n}) => {\n  _s();\n  useEffect(() => {\n    const config = {\n      width,\n      height,\n      colors: d3.scaleOrdinal(d3.schemeCategory10)\n      // Add other config options here...\n    };\n\n    // D3 logic to create the chart\n    const createChart = () => {\n      const container = d3.select('#chartContainer');\n      const partition = data => {\n        const root = d3.hierarchy(data).sum(d => d.noOfColleges).sort((a, b) => b.noOfColleges - a.noOfColleges);\n        return d3.partition().size([2 * Math.PI, root.height + 1])(root);\n      };\n      const root = partition(data);\n      const arc = d3.arc().startAngle(d => d.x0).endAngle(d => d.x1).innerRadius(d => Math.sqrt(d.y0)).outerRadius(d => Math.sqrt(d.y1));\n      container.selectAll('*').remove();\n      const svg = container.append('svg').attr('viewBox', [-width / 2, -height / 2, width, height]).style('font', '10px sans-serif');\n      svg.append('g').selectAll('path').data(root.descendants().slice(1)).join('path').attr('fill', d => {\n        while (d.depth > 1) d = d.parent;\n        return config.colors(d.data.place);\n      }).attr('fill-opacity', d => arcVisible(d.current) ? d.children ? 0.6 : 0.4 : 0).attr('d', d => arc(d.current)).on('click', clicked);\n      svg.append('g').selectAll('text').data(root.descendants().slice(1)).join('text').attr('fill-opacity', d => +labelVisible(d.current)).attr('transform', d => labelTransform(d.current)).attr('dy', '0.35em').text(d => d.data.place);\n      function clicked(p) {\n        parent.datum(p.parent || root);\n        root.each(d => d.target = {\n          x0: Math.max(0, Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,\n          x1: Math.max(0, Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,\n          y0: Math.max(0, d.y0 - p.depth),\n          y1: Math.max(0, d.y1 - p.depth)\n        });\n        const t = g.transition().duration(750);\n\n        // Transition the data on all arcs, even the ones that aren’t visible,\n        // so that if this transition is interrupted, entering arcs will start\n        // the next transition from the desired position.\n        path.transition(t).tween('data', d => {\n          const i = d3.interpolate(d.current, d.target);\n          return t => d.current = i(t);\n        }).filter(function (d) {\n          return +this.getAttribute('fill-opacity') || arcVisible(d.target);\n        }).attr('fill-opacity', d => arcVisible(d.target) ? d.children ? 0.6 : 0.4 : 0).attrTween('d', d => () => arc(d.current));\n        label.transition(t).attr('fill-opacity', d => +labelVisible(d.target)).attrTween('transform', d => () => labelTransform(d.current));\n      }\n      function arcVisible(d) {\n        return d.y1 <= 3 && d.y0 >= 1 && d.x1 > d.x0;\n      }\n      function labelVisible(d) {\n        return d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.03;\n      }\n      function labelTransform(d) {\n        const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\n        const y = (d.y0 + d.y1) / 2 * Math.sqrt(width * width + height * height) / 2;\n        return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\n      }\n    };\n    createChart();\n\n    // Clean-up function\n    return () => {\n      // Clean-up logic if needed\n    };\n  }, [data, width, height]); // Dependency array to re-run effect when data, width, or height change\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"chartContainer\",\n    className: \"well\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 10\n  }, this);\n};\n_s(MultiLevelDonutChart, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = MultiLevelDonutChart;\nexport default MultiLevelDonutChart;\nvar _c;\n$RefreshReg$(_c, \"MultiLevelDonutChart\");","map":{"version":3,"names":["React","useEffect","d3","jsxDEV","_jsxDEV","MultiLevelDonutChart","data","width","height","_s","config","colors","scaleOrdinal","schemeCategory10","createChart","container","select","partition","root","hierarchy","sum","d","noOfColleges","sort","a","b","size","Math","PI","arc","startAngle","x0","endAngle","x1","innerRadius","sqrt","y0","outerRadius","y1","selectAll","remove","svg","append","attr","style","descendants","slice","join","depth","parent","place","arcVisible","current","children","on","clicked","labelVisible","labelTransform","text","p","datum","each","target","max","min","t","g","transition","duration","path","tween","i","interpolate","filter","getAttribute","attrTween","label","x","y","id","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/goncaloarieiro/thesis/multimodal-interaction/src/components/charts/PieChart.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport * as d3 from 'd3'\n\nconst MultiLevelDonutChart = ({ data, width = 500, height = 500 }) => {\n  useEffect(() => {\n    const config = {\n      width,\n      height,\n      colors: d3.scaleOrdinal(d3.schemeCategory10),\n      // Add other config options here...\n    }\n\n    // D3 logic to create the chart\n    const createChart = () => {\n      const container = d3.select('#chartContainer')\n\n      const partition = (data) => {\n        const root = d3\n          .hierarchy(data)\n          .sum((d) => d.noOfColleges)\n          .sort((a, b) => b.noOfColleges - a.noOfColleges)\n        return d3.partition().size([2 * Math.PI, root.height + 1])(root)\n      }\n\n      const root = partition(data)\n\n      const arc = d3\n        .arc()\n        .startAngle((d) => d.x0)\n        .endAngle((d) => d.x1)\n        .innerRadius((d) => Math.sqrt(d.y0))\n        .outerRadius((d) => Math.sqrt(d.y1))\n\n      container.selectAll('*').remove()\n\n      const svg = container\n        .append('svg')\n        .attr('viewBox', [-width / 2, -height / 2, width, height])\n        .style('font', '10px sans-serif')\n\n      svg\n        .append('g')\n        .selectAll('path')\n        .data(root.descendants().slice(1))\n        .join('path')\n        .attr('fill', (d) => {\n          while (d.depth > 1) d = d.parent\n          return config.colors(d.data.place)\n        })\n        .attr('fill-opacity', (d) =>\n          arcVisible(d.current) ? (d.children ? 0.6 : 0.4) : 0\n        )\n        .attr('d', (d) => arc(d.current))\n        .on('click', clicked)\n\n      svg\n        .append('g')\n        .selectAll('text')\n        .data(root.descendants().slice(1))\n        .join('text')\n        .attr('fill-opacity', (d) => +labelVisible(d.current))\n        .attr('transform', (d) => labelTransform(d.current))\n        .attr('dy', '0.35em')\n        .text((d) => d.data.place)\n\n      function clicked(p) {\n        parent.datum(p.parent || root)\n\n        root.each(\n          (d) =>\n            (d.target = {\n              x0:\n                Math.max(0, Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))) *\n                2 *\n                Math.PI,\n              x1:\n                Math.max(0, Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))) *\n                2 *\n                Math.PI,\n              y0: Math.max(0, d.y0 - p.depth),\n              y1: Math.max(0, d.y1 - p.depth),\n            })\n        )\n\n        const t = g.transition().duration(750)\n\n        // Transition the data on all arcs, even the ones that aren’t visible,\n        // so that if this transition is interrupted, entering arcs will start\n        // the next transition from the desired position.\n        path\n          .transition(t)\n          .tween('data', (d) => {\n            const i = d3.interpolate(d.current, d.target)\n            return (t) => (d.current = i(t))\n          })\n          .filter(function (d) {\n            return +this.getAttribute('fill-opacity') || arcVisible(d.target)\n          })\n          .attr('fill-opacity', (d) =>\n            arcVisible(d.target) ? (d.children ? 0.6 : 0.4) : 0\n          )\n          .attrTween('d', (d) => () => arc(d.current))\n\n        label\n          .transition(t)\n          .attr('fill-opacity', (d) => +labelVisible(d.target))\n          .attrTween('transform', (d) => () => labelTransform(d.current))\n      }\n\n      function arcVisible(d) {\n        return d.y1 <= 3 && d.y0 >= 1 && d.x1 > d.x0\n      }\n\n      function labelVisible(d) {\n        return d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.03\n      }\n\n      function labelTransform(d) {\n        const x = (((d.x0 + d.x1) / 2) * 180) / Math.PI\n        const y =\n          (((d.y0 + d.y1) / 2) * Math.sqrt(width * width + height * height)) / 2\n        return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`\n      }\n    }\n\n    createChart()\n\n    // Clean-up function\n    return () => {\n      // Clean-up logic if needed\n    }\n  }, [data, width, height]) // Dependency array to re-run effect when data, width, or height change\n\n  return <div id=\"chartContainer\" className=\"well\"></div>\n}\n\nexport default MultiLevelDonutChart\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}