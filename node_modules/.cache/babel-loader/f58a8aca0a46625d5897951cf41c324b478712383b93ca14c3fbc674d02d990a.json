{"ast":null,"code":"var _jsxFileName = \"/Users/goncaloarieiro/thesis/multimodal-interaction/src/components/charts/PieChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MultiLevelPieChart = ({\n  data\n}) => {\n  _s();\n  useEffect(() => {\n    drawChart();\n  }, [data]);\n  const drawChart = () => {\n    d3.select('#chart-container').selectAll('*').remove();\n    const width = 1000;\n    const height = 500;\n    const radius = Math.min(width, height) / 2 - 50;\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const svg = d3.select('#chart-container').append('svg').attr('width', width).attr('height', height).append('g').attr('transform', `translate(${width / 2},${height / 2})`);\n\n    // Função para calcular o ângulo para dados planos\n    const calculateAngle = d3.pie().sort(null).value(d => d.value);\n\n    // Função para calcular o raio baseado no valor (raio variável)\n    const arc = d3.arc().startAngle(d => d.startAngle).endAngle(d => d.endAngle).innerRadius(d => d.innerRadius).outerRadius(d => d.outerRadius);\n    const partition = d3.partition().size([2 * Math.PI, radius]);\n    let root;\n    if (data.children) {\n      // Caso original hierárquico\n      root = d3.hierarchy(data).sum(d => d.value);\n    } else {\n      // Caso novo plano\n      root = {\n        children: data.map(d => ({\n          ...d,\n          value: d.value\n        }))\n      };\n    }\n    partition(root);\n    const path = svg.selectAll('path').data(root.descendants()).enter().append('path').attr('d', arc).style('fill', d => color(d.data.semantic || d.data.name)).style('stroke', '#fff').on('mouseover', handleMouseOver).on('mouseout', handleMouseOut);\n    path.append('title').text(d => `${d.data.semantic || d.data.name}\\n${d.value}`);\n    function handleMouseOver(d) {\n      // Mostrar tooltip com informações relevantes\n      d3.select(this).attr('opacity', 0.7);\n    }\n    function handleMouseOut(d) {\n      // Esconder tooltip\n      d3.select(this).attr('opacity', 1);\n    }\n\n    // Adicionar legenda\n    const legend = svg.selectAll('.legend').data(color.domain()).enter().append('g').attr('class', 'legend').attr('transform', (d, i) => `translate(-${width / 2 + 20},${i * 20 - height / 2})`);\n    legend.append('rect').attr('x', width - 18).attr('width', 18).attr('height', 18).style('fill', color);\n    legend.append('text').attr('x', width - 24).attr('y', 9).attr('dy', '.35em').style('text-anchor', 'end').text(d => d);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"chart-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 10\n  }, this);\n};\n_s(MultiLevelPieChart, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = MultiLevelPieChart;\nexport default MultiLevelPieChart;\nvar _c;\n$RefreshReg$(_c, \"MultiLevelPieChart\");","map":{"version":3,"names":["React","useEffect","d3","jsxDEV","_jsxDEV","MultiLevelPieChart","data","_s","drawChart","select","selectAll","remove","width","height","radius","Math","min","color","scaleOrdinal","schemeCategory10","svg","append","attr","calculateAngle","pie","sort","value","d","arc","startAngle","endAngle","innerRadius","outerRadius","partition","size","PI","root","children","hierarchy","sum","map","path","descendants","enter","style","semantic","name","on","handleMouseOver","handleMouseOut","text","legend","domain","i","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/goncaloarieiro/thesis/multimodal-interaction/src/components/charts/PieChart.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport * as d3 from 'd3'\n\nconst MultiLevelPieChart = ({ data }) => {\n  useEffect(() => {\n    drawChart()\n  }, [data])\n\n  const drawChart = () => {\n    d3.select('#chart-container').selectAll('*').remove()\n\n    const width = 1000\n    const height = 500\n    const radius = Math.min(width, height) / 2 - 50\n\n    const color = d3.scaleOrdinal(d3.schemeCategory10)\n\n    const svg = d3\n      .select('#chart-container')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .attr('transform', `translate(${width / 2},${height / 2})`)\n\n    // Função para calcular o ângulo para dados planos\n    const calculateAngle = d3\n      .pie()\n      .sort(null)\n      .value((d) => d.value)\n\n    // Função para calcular o raio baseado no valor (raio variável)\n    const arc = d3\n      .arc()\n      .startAngle((d) => d.startAngle)\n      .endAngle((d) => d.endAngle)\n      .innerRadius((d) => d.innerRadius)\n      .outerRadius((d) => d.outerRadius)\n\n    const partition = d3.partition().size([2 * Math.PI, radius])\n\n    let root\n\n    if (data.children) {\n      // Caso original hierárquico\n      root = d3.hierarchy(data).sum((d) => d.value)\n    } else {\n      // Caso novo plano\n      root = { children: data.map((d) => ({ ...d, value: d.value })) }\n    }\n\n    partition(root)\n\n    const path = svg\n      .selectAll('path')\n      .data(root.descendants())\n      .enter()\n      .append('path')\n      .attr('d', arc)\n      .style('fill', (d) => color(d.data.semantic || d.data.name))\n      .style('stroke', '#fff')\n      .on('mouseover', handleMouseOver)\n      .on('mouseout', handleMouseOut)\n\n    path\n      .append('title')\n      .text((d) => `${d.data.semantic || d.data.name}\\n${d.value}`)\n\n    function handleMouseOver(d) {\n      // Mostrar tooltip com informações relevantes\n      d3.select(this).attr('opacity', 0.7)\n    }\n\n    function handleMouseOut(d) {\n      // Esconder tooltip\n      d3.select(this).attr('opacity', 1)\n    }\n\n    // Adicionar legenda\n    const legend = svg\n      .selectAll('.legend')\n      .data(color.domain())\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr(\n        'transform',\n        (d, i) => `translate(-${width / 2 + 20},${i * 20 - height / 2})`\n      )\n\n    legend\n      .append('rect')\n      .attr('x', width - 18)\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', color)\n\n    legend\n      .append('text')\n      .attr('x', width - 24)\n      .attr('y', 9)\n      .attr('dy', '.35em')\n      .style('text-anchor', 'end')\n      .text((d) => d)\n  }\n\n  return <div id=\"chart-container\"></div>\n}\n\nexport default MultiLevelPieChart\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}