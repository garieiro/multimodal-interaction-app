{"ast":null,"code":"var _jsxFileName = \"/Users/goncaloarieiro/thesis/multimodal-interaction-app/src/components/charts/SankeyChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { sankey as d3Sankey, sankeyLeft, sankeyLinkHorizontal } from 'd3-sankey';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SankeyChart = ({\n  data\n}) => {\n  _s();\n  useEffect(() => {\n    const width = 400;\n    const height = 400;\n    const format = d3.format(',.0f');\n\n    // Limpa o conteúdo anterior do gráfico antes de desenhar\n    d3.select('#sankey-chart').select('svg').remove();\n    const svg = d3.select('#sankey-chart').append('svg').attr('width', width).attr('height', height).attr('viewBox', [0, 0, width, height]).attr('style', 'height: auto; font: 10px sans-serif;');\n    const sankey = d3Sankey().nodeId(d => d.name).nodeAlign(sankeyLeft).nodeWidth(15).nodePadding(10).extent([[1, 5], [width - 1, height - 5]]);\n    const {\n      nodes,\n      links\n    } = sankey({\n      nodes: data.nodes.map(d => Object.assign({}, d)),\n      links: data.links.map(d => Object.assign({}, d))\n    });\n\n    // Defina suas cores personalizadas\n    const color = d3.scaleOrdinal().domain(nodes.map(d => d.category || d.name)) // Usar 'category' ou 'name' como fallback\n    .range(['#1f77b4', '#ff7f0e', '#2ca02c', '#d62728', '#9467bd']); // Cores personalizadas\n\n    const rect = svg.append('g').attr('stroke', '#000').selectAll('rect').data(nodes).enter().append('rect').attr('x', d => d.x0).attr('y', d => d.y0).attr('height', d => d.y1 - d.y0).attr('width', d => d.x1 - d.x0).attr('fill', d => color(d.category || d.name)); // Aplica a cor personalizada\n\n    rect.append('title').text(d => `${d.name}\\n${format(d.value)} TWh`);\n    const link = svg.append('g').attr('fill', 'none').attr('stroke-opacity', 0.5).selectAll('path').data(links).enter().append('g').style('mix-blend-mode', 'multiply');\n    link.append('path').attr('d', sankeyLinkHorizontal()).attr('stroke', '#000').attr('stroke-width', d => Math.max(1, d.width));\n    link.append('title').text(d => `${d.source.name} → ${d.target.name}\\n${format(d.value)} TWh`);\n    svg.append('g').selectAll('text').data(nodes).enter().append('text').attr('x', d => d.x0 < width / 2 ? d.x1 + 6 : d.x0 - 6).attr('y', d => (d.y1 + d.y0) / 2).attr('dy', '0.35em').attr('text-anchor', d => d.x0 < width / 2 ? 'start' : 'end').text(d => d.name);\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"sankey-chart\",\n    style: {\n      width: '100%',\n      height: '600px',\n      // Mantenha a altura\n      overflow: 'auto',\n      // Ativa a rolagem\n      border: '1px solid #ccc' // Borda opcional\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n_s(SankeyChart, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = SankeyChart;\nexport default SankeyChart;\nvar _c;\n$RefreshReg$(_c, \"SankeyChart\");","map":{"version":3,"names":["React","useEffect","d3","sankey","d3Sankey","sankeyLeft","sankeyLinkHorizontal","jsxDEV","_jsxDEV","SankeyChart","data","_s","width","height","format","select","remove","svg","append","attr","nodeId","d","name","nodeAlign","nodeWidth","nodePadding","extent","nodes","links","map","Object","assign","color","scaleOrdinal","domain","category","range","rect","selectAll","enter","x0","y0","y1","x1","text","value","link","style","Math","max","source","target","id","overflow","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/goncaloarieiro/thesis/multimodal-interaction-app/src/components/charts/SankeyChart.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport * as d3 from 'd3'\nimport { sankey as d3Sankey, sankeyLeft, sankeyLinkHorizontal } from 'd3-sankey'\n\nconst SankeyChart = ({ data }) => {\n  useEffect(() => {\n    const width = 400\n    const height = 400\n    const format = d3.format(',.0f')\n\n    // Limpa o conteúdo anterior do gráfico antes de desenhar\n    d3.select('#sankey-chart').select('svg').remove()\n\n    const svg = d3\n      .select('#sankey-chart')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .attr('viewBox', [0, 0, width, height])\n      .attr('style', 'height: auto; font: 10px sans-serif;')\n\n    const sankey = d3Sankey()\n      .nodeId((d) => d.name)\n      .nodeAlign(sankeyLeft)\n      .nodeWidth(15)\n      .nodePadding(10)\n      .extent([\n        [1, 5],\n        [width - 1, height - 5],\n      ])\n\n    const { nodes, links } = sankey({\n      nodes: data.nodes.map((d) => Object.assign({}, d)),\n      links: data.links.map((d) => Object.assign({}, d)),\n    })\n\n    // Defina suas cores personalizadas\n    const color = d3\n      .scaleOrdinal()\n      .domain(nodes.map((d) => d.category || d.name)) // Usar 'category' ou 'name' como fallback\n      .range(['#1f77b4', '#ff7f0e', '#2ca02c', '#d62728', '#9467bd']) // Cores personalizadas\n\n    const rect = svg\n      .append('g')\n      .attr('stroke', '#000')\n      .selectAll('rect')\n      .data(nodes)\n      .enter()\n      .append('rect')\n      .attr('x', (d) => d.x0)\n      .attr('y', (d) => d.y0)\n      .attr('height', (d) => d.y1 - d.y0)\n      .attr('width', (d) => d.x1 - d.x0)\n      .attr('fill', (d) => color(d.category || d.name)) // Aplica a cor personalizada\n\n    rect.append('title').text((d) => `${d.name}\\n${format(d.value)} TWh`)\n\n    const link = svg\n      .append('g')\n      .attr('fill', 'none')\n      .attr('stroke-opacity', 0.5)\n      .selectAll('path')\n      .data(links)\n      .enter()\n      .append('g')\n      .style('mix-blend-mode', 'multiply')\n\n    link\n      .append('path')\n      .attr('d', sankeyLinkHorizontal())\n      .attr('stroke', '#000')\n      .attr('stroke-width', (d) => Math.max(1, d.width))\n\n    link\n      .append('title')\n      .text(\n        (d) => `${d.source.name} → ${d.target.name}\\n${format(d.value)} TWh`\n      )\n\n    svg\n      .append('g')\n      .selectAll('text')\n      .data(nodes)\n      .enter()\n      .append('text')\n      .attr('x', (d) => (d.x0 < width / 2 ? d.x1 + 6 : d.x0 - 6))\n      .attr('y', (d) => (d.y1 + d.y0) / 2)\n      .attr('dy', '0.35em')\n      .attr('text-anchor', (d) => (d.x0 < width / 2 ? 'start' : 'end'))\n      .text((d) => d.name)\n  }, [data])\n\n  return (\n    <div\n      id=\"sankey-chart\"\n      style={{\n        width: '100%',\n        height: '600px', // Mantenha a altura\n        overflow: 'auto', // Ativa a rolagem\n        border: '1px solid #ccc', // Borda opcional\n      }}\n    ></div>\n  )\n}\n\nexport default SankeyChart\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}