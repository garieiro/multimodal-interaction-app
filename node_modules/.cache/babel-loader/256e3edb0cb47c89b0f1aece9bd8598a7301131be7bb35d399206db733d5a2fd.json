{"ast":null,"code":"var _jsxFileName = \"/Users/goncaloarieiro/thesis/multimodal-interaction-app/src/components/charts/SankeyChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { sankey as d3Sankey, sankeyLeft, sankeyLinkHorizontal } from 'd3-sankey';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SankeyChart = ({\n  data\n}) => {\n  _s();\n  useEffect(() => {\n    const width = 928;\n    const height = 600;\n    const format = d3.format(',.0f');\n    const svg = d3.select('#sankey-chart').append('svg').attr('width', width).attr('height', height).attr('viewBox', [0, 0, width, height]).attr('style', 'max-width: 100%; height: auto; font: 10px sans-serif;');\n    const sankey = d3Sankey().nodeId(d => d.name).nodeAlign(sankeyLeft).nodeWidth(15).nodePadding(10).extent([[1, 5], [width - 1, height - 5]]);\n    const {\n      nodes,\n      links\n    } = sankey({\n      nodes: data.nodes.map(d => Object.assign({}, d)),\n      links: data.links.map(d => Object.assign({}, d))\n    });\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const rect = svg.append('g').attr('stroke', '#000').selectAll('rect').data(nodes).enter().append('rect').attr('x', d => d.x0).attr('y', d => d.y0).attr('height', d => d.y1 - d.y0).attr('width', d => d.x1 - d.x0).attr('fill', d => color(d.category));\n    rect.append('title').text(d => `${d.name}\\n${format(d.value)} TWh`);\n    const link = svg.append('g').attr('fill', 'none').attr('stroke-opacity', 0.5).selectAll('path').data(links).enter().append('g').style('mix-blend-mode', 'multiply');\n    link.append('path').attr('d', sankeyLinkHorizontal()).attr('stroke', '#000').attr('stroke-width', d => Math.max(1, d.width));\n    link.append('title').text(d => `${d.source.name} → ${d.target.name}\\n${format(d.value)} TWh`);\n    svg.append('g').selectAll('text').data(nodes).enter().append('text').attr('x', d => d.x0 < width / 2 ? d.x1 + 6 : d.x0 - 6).attr('y', d => (d.y1 + d.y0) / 2).attr('dy', '0.35em').attr('text-anchor', d => d.x0 < width / 2 ? 'start' : 'end').text(d => d.name);\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"sankey-chart\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 10\n  }, this);\n};\n_s(SankeyChart, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = SankeyChart;\nexport default SankeyChart;\nvar _c;\n$RefreshReg$(_c, \"SankeyChart\");","map":{"version":3,"names":["React","useEffect","d3","sankey","d3Sankey","sankeyLeft","sankeyLinkHorizontal","jsxDEV","_jsxDEV","SankeyChart","data","_s","width","height","format","svg","select","append","attr","nodeId","d","name","nodeAlign","nodeWidth","nodePadding","extent","nodes","links","map","Object","assign","color","scaleOrdinal","schemeCategory10","rect","selectAll","enter","x0","y0","y1","x1","category","text","value","link","style","Math","max","source","target","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/goncaloarieiro/thesis/multimodal-interaction-app/src/components/charts/SankeyChart.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport * as d3 from 'd3'\nimport { sankey as d3Sankey, sankeyLeft, sankeyLinkHorizontal } from 'd3-sankey'\n\nconst SankeyChart = ({ data }) => {\n  useEffect(() => {\n    const width = 928\n    const height = 600\n    const format = d3.format(',.0f')\n\n    const svg = d3\n      .select('#sankey-chart')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .attr('viewBox', [0, 0, width, height])\n      .attr('style', 'max-width: 100%; height: auto; font: 10px sans-serif;')\n\n    const sankey = d3Sankey()\n      .nodeId((d) => d.name)\n      .nodeAlign(sankeyLeft)\n      .nodeWidth(15)\n      .nodePadding(10)\n      .extent([\n        [1, 5],\n        [width - 1, height - 5],\n      ])\n\n    const { nodes, links } = sankey({\n      nodes: data.nodes.map((d) => Object.assign({}, d)),\n      links: data.links.map((d) => Object.assign({}, d)),\n    })\n\n    const color = d3.scaleOrdinal(d3.schemeCategory10)\n\n    const rect = svg\n      .append('g')\n      .attr('stroke', '#000')\n      .selectAll('rect')\n      .data(nodes)\n      .enter()\n      .append('rect')\n      .attr('x', (d) => d.x0)\n      .attr('y', (d) => d.y0)\n      .attr('height', (d) => d.y1 - d.y0)\n      .attr('width', (d) => d.x1 - d.x0)\n      .attr('fill', (d) => color(d.category))\n\n    rect.append('title').text((d) => `${d.name}\\n${format(d.value)} TWh`)\n\n    const link = svg\n      .append('g')\n      .attr('fill', 'none')\n      .attr('stroke-opacity', 0.5)\n      .selectAll('path')\n      .data(links)\n      .enter()\n      .append('g')\n      .style('mix-blend-mode', 'multiply')\n\n    link\n      .append('path')\n      .attr('d', sankeyLinkHorizontal())\n      .attr('stroke', '#000')\n      .attr('stroke-width', (d) => Math.max(1, d.width))\n\n    link\n      .append('title')\n      .text(\n        (d) => `${d.source.name} → ${d.target.name}\\n${format(d.value)} TWh`\n      )\n\n    svg\n      .append('g')\n      .selectAll('text')\n      .data(nodes)\n      .enter()\n      .append('text')\n      .attr('x', (d) => (d.x0 < width / 2 ? d.x1 + 6 : d.x0 - 6))\n      .attr('y', (d) => (d.y1 + d.y0) / 2)\n      .attr('dy', '0.35em')\n      .attr('text-anchor', (d) => (d.x0 < width / 2 ? 'start' : 'end'))\n      .text((d) => d.name)\n  }, [data])\n\n  return <div id=\"sankey-chart\"></div>\n}\n\nexport default SankeyChart\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}